function hideAddressBar(){window.scrollTo(0,1)}function w(a){document.write(a)}function getParameterByName(a){var b=RegExp("[?&]"+a+"=([^&]*)").exec(window.location.search);return b&&decodeURIComponent(b[1].replace(/\+/g," "))}function g(a){var b=window.location.search.replace(/t=./,"");b+="&t="+a,b=b.replace("&&","&"),document.location=b}function estimateMiles(a,b){var c=a/12*b;return{perLease:c,perYear:b,perMonth:b/12,perWeek:b/52,perDay:b/365}}function estimateMilesOn(a,b,c){var d=moment(b.leaseStart),e=c||estimateMiles(LeaseInfo.leaseLength,LeaseInfo.milesPerYear),f=a.diff(d,"days"),g=e.perDay*f;return g}function buildForRange(a){var b=a.unit+"s",c=moment(a.aroundDate).startOf("day"),d=c.clone().subtract(b,UNITS_AROUND),e=moment(a.leaseInfo.leaseStart);d.diff(e,b)<0&&(d=e);for(var f=a.dayStrategy||function(a,c){return a.clone().add(b,c)},g=[],h=estimateMiles(a.leaseInfo.leaseLength,a.leaseInfo.milesPerYear),i=0;2*UNITS_AROUND+1>i;i++){var j={day:f(d,i)},k=c.diff(j.day,b);j.type=0==k?"current info":k>0?"past":"future";var l=estimateMilesOn(j.day,a.leaseInfo,h);j.estimate=l,g.push(j)}return g}function ranger(a){return{d:getDayRange,w:getWeeklyRange,m:getMonthEndRange}[a]}function nmap(a){return{d:"Daily",w:"Weekly",m:"Monthly"}[a]}function getDayRange(a,b){return buildForRange({unit:"day",aroundDate:a,leaseInfo:b})}function getWeeklyRange(a,b){return buildForRange({unit:"week",aroundDate:a,leaseInfo:b,dayStrategy:function(a,b){var c=a.clone().add("weeks",b),d=c.toDate().getDay();return c.add("days",6-d),console.log("for %s + %d end is %s (wd=%d)",a.toString(),b,c.toString(),d),c}})}function getMonthRange(a,b){return buildForRange({unit:"month",aroundDate:a,leaseInfo:b})}function getMonthEndRange(a,b){return buildForRange({unit:"month",aroundDate:a,leaseInfo:b,dayStrategy:function(a,b){return a.clone().add("months",b).endOf("month")}})}function writeLeaseTable(){var a=document,b=a.querySelector("#miles tbody"),c=function(b){return a.createElement(b)},d=function(b,d){var e=c(b),f=a.createTextNode(d);return e.appendChild(f),e};targetDate=getParameterByName("@");var e=function(){for(today=targetDate?moment(targetDate).startOf("day"):moment().startOf("day"),console.log("painting for ",today),rangeF=ranger(MODE),miles=rangeF(today,LeaseInfo);b.firstChild;)b.removeChild(b.firstChild);miles.forEach(function(e){var f=c("tr"),h=(c("td"),a.createAttribute("class"));h.value=e.type,f.setAttributeNode(h),f.appendChild(d("td",e.day.toDate().toDateString())),f.appendChild(d("td",Math.floor(e.estimate)+" miles")),b.appendChild(f)})};return e}var UNITS_AROUND=2,LeaseInfo={leaseStart:moment("2012-09-08"),leaseLength:36,milesPerYear:12e3,milesPerYearShort:"12k"},TODAY;!function(a,b,c,d){var e=getParameterByName(b);e&&(a.leaseStart=moment(e));var f=getParameterByName(c);f&&(a.leaseLength=parseInt(f,10));var g=parseInt(getParameterByName(d));g&&(1e3>g?(a.milesPerYear=1e3*g,a.milesPerYearShort=g+"k"):(a.milesPerYear=g,a.milesPerYearShort=g%1e3+"k"))}(LeaseInfo,"d","l","m");