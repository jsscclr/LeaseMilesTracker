<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>Lease Mileage Tracker</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="stylesheet" href="css/simple/bootstrap.min.css" />
		<style type="text/css">
			input[type=number]::-webkit-inner-spin-button,
			input[type=number]::-webkit-outer-spin-button {
    			-webkit-appearance: none;
    			margin: 0;
			}
			.center { text-align: center; }
			.past { opacity: 0.25 }
			.future {  font-style: italic }
		
		</style>
		<script type="text/javascript">
		if (navigator.userAgent.indexOf('iPhone') != -1) {
			addEventListener('load', function() {
				setTimeout(hideAddressBar, 100)
				}, false)
		}
		function hideAddressBar() {
			window.scrollTo(0, 1)
		}
		function w(what) {
			document.write(what)
		}
		function g(where) {
			var newQS = window.location.search.replace(/t=./, '');
			newQS += '&t=' + where;
			document.location = newQS;
		}
		</script>
		<script src="js/moment.min.js"></script>
		<script src="js/main.js"></script>
		<script type="text/javascript">
			var MODE = getParameterByName('t') || 'd',
			NAME = nmap(MODE);
			window.title = NAME + 'Miles - ' + window.title;
		</script>
	</head>
	<body>
		<div class="container">

			<h1>
				<span id="leaseMonths"><script type="text/javascript">
				w(LeaseInfo.leaseLength);
				</script></span> 
				@ <span id="milesPerYear"><script type="text/javascript">
				w(LeaseInfo.milesPerYearShort);
				</script></span> lease
				<small>started on <span id="startedOn"><script type="text/javascript">
				w(LeaseInfo.leaseStart.toDate().toDateString());</script></span></small>
			</h1>

			<table class="table">
				<caption><script type="text/javascript">
						w(NAME)
				</script> estimates</caption>
				<thead>
					<tr>
						<th>Date</th>
						<th>Miles</th>
					</tr>
				</thead>
				<tbody>
				<script type="text/javascript">
					var targetDate = getParameterByName('@'),
						today = targetDate ? moment(targetDate).startOf('day') : moment().startOf('day'),
						rangeF = ranger(MODE),
						miles = rangeF(today, LeaseInfo);
					miles.forEach(function(m) {
						document.writeln('<tr class="' + m.type + '">');
						document.writeln('<td>' + m.day.toDate().toDateString() + '</td>');
						document.writeln('<td>' + Math.floor(m.estimate) + ' miles</td>');
						document.writeln('</tr>');
					})
				</script>
				</tbody>
			</table>

			<p>
				Available in 
				<a href="javascript:g('d')">Daily</a>,
				<a href="javascript:g('w')">Weekly</a>
				and
				<a href="javascript:g('m')">Monthly</a>
				formats.
			</p>
		</div>
		<div class="row">
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
		</div>
	</body>
</html>
